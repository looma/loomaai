[D 240804 01:59:47 config:31] LoomaAI initialized
[D 240804 01:59:47 main:19] loomaai initialized
2024-08-04 01:59:47.439 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 177, in __init__
    import pypdf  # noqa:F401
    ^^^^^^^^^^^^
ModuleNotFoundError: No module named 'pypdf'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 11, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 179, in __init__
    raise ImportError(
ImportError: pypdf package not found, please install it with `pip install pypdf`
2024-08-04 02:01:00.932 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 11, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 182, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:01:38.879 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 12, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 182, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:02:09.829 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 32, in main
    file_path = filePath(file)
                ^^^^^^^^^^^^^^
  File "/app/appai/pages/04_SummarizePage.py", line 15, in filePath
    tf.write(file.getbuffer())
             ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'getbuffer'
2024-08-04 02:03:12.356 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 359, in __init__
    import fitz  # noqa:F401
    ^^^^^^^^^^^
ModuleNotFoundError: No module named 'fitz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/03_Prompt.py", line 94, in <module>
    main()
  File "/app/appai/pages/03_Prompt.py", line 90, in main
    page()
  File "/app/appai/pages/03_Prompt.py", line 37, in page
    model.makeChain(file_path)
  File "/app/appai/common/RAG.py", line 24, in makeChain
    pdf = PyMuPDFLoader(pdfPath).load()
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 361, in __init__
    raise ImportError(
ImportError: `PyMuPDF` package not found, please install it with `pip install pymupdf`
2024-08-04 02:03:16.199 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/03_Prompt.py", line 94, in <module>
    main()
  File "/app/appai/pages/03_Prompt.py", line 90, in main
    page()
  File "/app/appai/pages/03_Prompt.py", line 31, in page
    file_path = choice()
                ^^^^^^^^
  File "/app/appai/pages/03_Prompt.py", line 83, in choice
    file_path = None if fileUpload() is None else fileUpload()
                                                  ^^^^^^^^^^^^
  File "/app/appai/pages/03_Prompt.py", line 19, in fileUpload
    uploaded_file = st.file_uploader('Choose your .pdf file', type="pdf")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/metrics_util.py", line 408, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/elements/widgets/file_uploader.py", line 368, in file_uploader
    return self._file_uploader(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/elements/widgets/file_uploader.py", line 461, in _file_uploader
    widget_state = register_widget(
                   ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/state/widgets.py", line 169, in register_widget
    return register_widget_from_metadata(metadata, ctx, widget_func_name, element_type)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/state/widgets.py", line 214, in register_widget_from_metadata
    raise DuplicateWidgetID(
streamlit.errors.DuplicateWidgetID: There are multiple identical `st.file_uploader` widgets with the
same generated key.

When a widget is created, it's assigned an internal key based on
its structure. Multiple widgets with an identical structure will
result in the same internal key, which causes this error.

To fix this error, please pass a unique `key` argument to
`st.file_uploader`.
2024-08-04 02:08:06.052 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 359, in __init__
    import fitz  # noqa:F401
    ^^^^^^^^^^^
ModuleNotFoundError: No module named 'fitz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/03_Prompt.py", line 94, in <module>
    main()
  File "/app/appai/pages/03_Prompt.py", line 90, in main
    page()
  File "/app/appai/pages/03_Prompt.py", line 37, in page
    model.makeChain(file_path)
  File "/app/appai/common/RAG.py", line 24, in makeChain
    pdf = PyMuPDFLoader(pdfPath).load()
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 361, in __init__
    raise ImportError(
ImportError: `PyMuPDF` package not found, please install it with `pip install pymupdf`
2024-08-04 02:09:13.400 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/03_Prompt.py", line 94, in <module>
    main()
  File "/app/appai/pages/03_Prompt.py", line 90, in main
    page()
  File "/app/appai/pages/03_Prompt.py", line 31, in page
    file_path = choice()
                ^^^^^^^^
  File "/app/appai/pages/03_Prompt.py", line 83, in choice
    file_path = None if fileUpload() is None else fileUpload()
                                                  ^^^^^^^^^^^^
  File "/app/appai/pages/03_Prompt.py", line 19, in fileUpload
    uploaded_file = st.file_uploader('Choose your .pdf file', type="pdf", key="03")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/metrics_util.py", line 408, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/elements/widgets/file_uploader.py", line 368, in file_uploader
    return self._file_uploader(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/elements/widgets/file_uploader.py", line 461, in _file_uploader
    widget_state = register_widget(
                   ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/state/widgets.py", line 169, in register_widget
    return register_widget_from_metadata(metadata, ctx, widget_func_name, element_type)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/state/widgets.py", line 202, in register_widget_from_metadata
    raise DuplicateWidgetID(
streamlit.errors.DuplicateWidgetID: There are multiple widgets with the same `key='03'`.

To fix this, please make sure that the `key` argument is unique for each
widget you create.
2024-08-04 02:10:39.777 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/03_Prompt.py", line 94, in <module>
    main()
  File "/app/appai/pages/03_Prompt.py", line 90, in main
    page()
  File "/app/appai/pages/03_Prompt.py", line 31, in page
    file_path = choice()
                ^^^^^^^^
  File "/app/appai/pages/03_Prompt.py", line 83, in choice
    file_path = None if fileUpload() is None else fileUpload()
                                                  ^^^^^^^^^^^^
  File "/app/appai/pages/03_Prompt.py", line 19, in fileUpload
    uploaded_file = st.file_uploader('Choose your .pdf file', type="pdf")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/metrics_util.py", line 408, in wrapped_func
    result = non_optional_func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/elements/widgets/file_uploader.py", line 368, in file_uploader
    return self._file_uploader(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/elements/widgets/file_uploader.py", line 461, in _file_uploader
    widget_state = register_widget(
                   ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/state/widgets.py", line 169, in register_widget
    return register_widget_from_metadata(metadata, ctx, widget_func_name, element_type)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/state/widgets.py", line 214, in register_widget_from_metadata
    raise DuplicateWidgetID(
streamlit.errors.DuplicateWidgetID: There are multiple identical `st.file_uploader` widgets with the
same generated key.

When a widget is created, it's assigned an internal key based on
its structure. Multiple widgets with an identical structure will
result in the same internal key, which causes this error.

To fix this error, please pass a unique `key` argument to
`st.file_uploader`.
2024-08-04 02:12:27.537 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 359, in __init__
    import fitz  # noqa:F401
    ^^^^^^^^^^^
ModuleNotFoundError: No module named 'fitz'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/03_Prompt.py", line 94, in <module>
    main()
  File "/app/appai/pages/03_Prompt.py", line 90, in main
    page()
  File "/app/appai/pages/03_Prompt.py", line 37, in page
    model.makeChain(file_path)
  File "/app/appai/common/RAG.py", line 24, in makeChain
    pdf = PyMuPDFLoader(pdfPath).load()
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 361, in __init__
    raise ImportError(
ImportError: `PyMuPDF` package not found, please install it with `pip install pymupdf`
/usr/local/lib/python3.12/site-packages/langchain_core/_api/deprecation.py:139: LangChainDeprecationWarning: The class `HuggingFaceEmbeddings` was deprecated in LangChain 0.2.2 and will be removed in 0.3.0. An updated version of the class exists in the langchain-huggingface package and should be used instead. To use it run `pip install -U langchain-huggingface` and import as `from langchain_huggingface import HuggingFaceEmbeddings`.
  warn_deprecated(
2024-08-04 02:15:33.373 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 12, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 182, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:15:55.659 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 32, in main
    file_path = filePath(file)
                ^^^^^^^^^^^^^^
  File "/app/appai/pages/04_SummarizePage.py", line 15, in filePath
    tf.write(file.getbuffer())
             ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'getbuffer'
2024-08-04 02:16:21.000 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 41, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 35, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 12, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 182, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:16:23.298 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 41, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 33, in main
    file_path = filePath(file)
                ^^^^^^^^^^^^^^
  File "/app/appai/pages/04_SummarizePage.py", line 16, in filePath
    tf.write(file.getbuffer())
             ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'getbuffer'
2024-08-04 02:19:55.422 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 39, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 33, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 12, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 182, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:20:09.584 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 39, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 31, in main
    file_path = filePath(file)
                ^^^^^^^^^^^^^^
  File "/app/appai/pages/04_SummarizePage.py", line 14, in filePath
    tf.write(file.getbuffer())
             ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'getbuffer'
2024-08-04 02:20:15.657 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 39, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 33, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 12, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 182, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:22:08.376 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 12, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 182, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:22:10.903 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 35, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 18, in query_llm
    chain = {"Question" : size , "Context" : pages} | prompt | llm | StrOutputParser()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 447, in __ror__
    return RunnableSequence(coerce_to_runnable(other), self)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5518, in coerce_to_runnable
    return cast(Runnable[Input, Output], RunnableParallel(thing))
                                         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3385, in __init__
    steps__={key: coerce_to_runnable(r) for key, r in merged.items()}
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5520, in coerce_to_runnable
    raise TypeError(
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'int'>
2024-08-04 02:22:40.859 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 12, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 182, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:22:43.360 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 65, in extract_from_images_with_rapidocr
    from rapidocr_onnxruntime import RapidOCR
ModuleNotFoundError: No module named 'rapidocr_onnxruntime'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 13, in extract_text
    pages = loader.load()
            ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/document_loaders/base.py", line 30, in load
    return list(self.lazy_load())
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 193, in lazy_load
    yield from self.parser.parse(blob)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/document_loaders/base.py", line 126, in parse
    return list(self.lazy_parse(blob))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 105, in lazy_parse
    + self._extract_images_from_page(page),
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 132, in _extract_images_from_page
    return extract_from_images_with_rapidocr(images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 67, in extract_from_images_with_rapidocr
    raise ImportError(
ImportError: `rapidocr-onnxruntime` package not found, please install it with `pip install rapidocr-onnxruntime`
2024-08-04 02:24:12.137 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 12, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 182, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:24:17.610 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 65, in extract_from_images_with_rapidocr
    from rapidocr_onnxruntime import RapidOCR
  File "/usr/local/lib/python3.12/site-packages/rapidocr_onnxruntime/__init__.py", line 4, in <module>
    from .main import RapidOCR
  File "/usr/local/lib/python3.12/site-packages/rapidocr_onnxruntime/main.py", line 8, in <module>
    import cv2
  File "/usr/local/lib/python3.12/site-packages/cv2/__init__.py", line 181, in <module>
    bootstrap()
  File "/usr/local/lib/python3.12/site-packages/cv2/__init__.py", line 153, in bootstrap
    native_module = importlib.import_module("cv2")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/importlib/__init__.py", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ImportError: libGL.so.1: cannot open shared object file: No such file or directory

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 13, in extract_text
    pages = loader.load()
            ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/document_loaders/base.py", line 30, in load
    return list(self.lazy_load())
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 193, in lazy_load
    yield from self.parser.parse(blob)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/document_loaders/base.py", line 126, in parse
    return list(self.lazy_parse(blob))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 105, in lazy_parse
    + self._extract_images_from_page(page),
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 132, in _extract_images_from_page
    return extract_from_images_with_rapidocr(images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 67, in extract_from_images_with_rapidocr
    raise ImportError(
ImportError: `rapidocr-onnxruntime` package not found, please install it with `pip install rapidocr-onnxruntime`
2024-08-04 02:24:26.170 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 12, in extract_text
    loader = PyPDFLoader(pdf_path, extract_images=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 182, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:24:28.676 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 65, in extract_from_images_with_rapidocr
    from rapidocr_onnxruntime import RapidOCR
  File "/usr/local/lib/python3.12/site-packages/rapidocr_onnxruntime/__init__.py", line 4, in <module>
    from .main import RapidOCR
  File "/usr/local/lib/python3.12/site-packages/rapidocr_onnxruntime/main.py", line 8, in <module>
    import cv2
ImportError: libGL.so.1: cannot open shared object file: No such file or directory

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 13, in extract_text
    pages = loader.load()
            ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/document_loaders/base.py", line 30, in load
    return list(self.lazy_load())
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 193, in lazy_load
    yield from self.parser.parse(blob)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/document_loaders/base.py", line 126, in parse
    return list(self.lazy_parse(blob))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 105, in lazy_parse
    + self._extract_images_from_page(page),
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 132, in _extract_images_from_page
    return extract_from_images_with_rapidocr(images)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/parsers/pdf.py", line 67, in extract_from_images_with_rapidocr
    raise ImportError(
ImportError: `rapidocr-onnxruntime` package not found, please install it with `pip install rapidocr-onnxruntime`
2024-08-04 02:25:29.167 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 15, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:25:31.464 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 35, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 20, in query_llm
    chain = {"Question" : str(size) , "Context" : pages} | prompt | llm | StrOutputParser()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 447, in __ror__
    return RunnableSequence(coerce_to_runnable(other), self)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5518, in coerce_to_runnable
    return cast(Runnable[Input, Output], RunnableParallel(thing))
                                         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3385, in __init__
    steps__={key: coerce_to_runnable(r) for key, r in merged.items()}
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5520, in coerce_to_runnable
    raise TypeError(
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'str'>
2024-08-04 02:26:33.871 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 16, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:26:37.128 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 35, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 21, in query_llm
    chain = {"Question" : RunnablePassthrough() , "Context" : pages} | prompt | llm | StrOutputParser()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 447, in __ror__
    return RunnableSequence(coerce_to_runnable(other), self)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5518, in coerce_to_runnable
    return cast(Runnable[Input, Output], RunnableParallel(thing))
                                         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3385, in __init__
    steps__={key: coerce_to_runnable(r) for key, r in merged.items()}
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5520, in coerce_to_runnable
    raise TypeError(
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'list'>
2024-08-04 02:27:49.936 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 16, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:27:52.098 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 35, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 21, in query_llm
    chain = {"question" : RunnablePassthrough() , "context" : pages} | prompt | llm | StrOutputParser()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 447, in __ror__
    return RunnableSequence(coerce_to_runnable(other), self)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5518, in coerce_to_runnable
    return cast(Runnable[Input, Output], RunnableParallel(thing))
                                         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3385, in __init__
    steps__={key: coerce_to_runnable(r) for key, r in merged.items()}
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5520, in coerce_to_runnable
    raise TypeError(
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'list'>
2024-08-04 02:29:50.847 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 16, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:29:54.125 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 35, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 21, in query_llm
    chain = {"question" : RunnablePassthrough() , "context" : pages} | prompt | llm | StrOutputParser()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 447, in __ror__
    return RunnableSequence(coerce_to_runnable(other), self)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5518, in coerce_to_runnable
    return cast(Runnable[Input, Output], RunnableParallel(thing))
                                         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3385, in __init__
    steps__={key: coerce_to_runnable(r) for key, r in merged.items()}
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5520, in coerce_to_runnable
    raise TypeError(
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'list'>
2024-08-04 02:30:54.883 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 16, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:30:57.900 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 35, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 21, in query_llm
    chain = {"size" : RunnablePassthrough() , "context" : pages} | prompt | llm | StrOutputParser()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 447, in __ror__
    return RunnableSequence(coerce_to_runnable(other), self)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5518, in coerce_to_runnable
    return cast(Runnable[Input, Output], RunnableParallel(thing))
                                         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3385, in __init__
    steps__={key: coerce_to_runnable(r) for key, r in merged.items()}
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5520, in coerce_to_runnable
    raise TypeError(
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'list'>
2024-08-04 02:31:47.941 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 16, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:31:50.571 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 35, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 21, in query_llm
    chain = {"size" : str(size), "context" : pages} | prompt | llm | StrOutputParser()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 447, in __ror__
    return RunnableSequence(coerce_to_runnable(other), self)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5518, in coerce_to_runnable
    return cast(Runnable[Input, Output], RunnableParallel(thing))
                                         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3385, in __init__
    steps__={key: coerce_to_runnable(r) for key, r in merged.items()}
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5520, in coerce_to_runnable
    raise TypeError(
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'str'>
2024-08-04 02:33:21.316 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 16, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:33:23.303 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 35, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 21, in query_llm
    chain = {"size" : lambda x: str(size), "context" : pages} | prompt | llm | StrOutputParser()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 447, in __ror__
    return RunnableSequence(coerce_to_runnable(other), self)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5518, in coerce_to_runnable
    return cast(Runnable[Input, Output], RunnableParallel(thing))
                                         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3385, in __init__
    steps__={key: coerce_to_runnable(r) for key, r in merged.items()}
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5520, in coerce_to_runnable
    raise TypeError(
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'list'>
2024-08-04 02:33:31.111 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 16, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:35:08.852 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 16, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:35:10.670 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 40, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 35, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 21, in query_llm
    st.write(pages)
    ^^
NameError: name 'st' is not defined
2024-08-04 02:35:42.949 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 41, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 16, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:35:46.375 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 41, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 36, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 21, in query_llm
    chain = {"size" : RunnablePassthrough(), "context" : pages} | prompt | llm | StrOutputParser()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 447, in __ror__
    return RunnableSequence(coerce_to_runnable(other), self)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5518, in coerce_to_runnable
    return cast(Runnable[Input, Output], RunnableParallel(thing))
                                         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3385, in __init__
    steps__={key: coerce_to_runnable(r) for key, r in merged.items()}
                  ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5520, in coerce_to_runnable
    raise TypeError(
TypeError: Expected a Runnable, callable or dict.Instead got an unsupported type: <class 'list'>
2024-08-04 02:37:03.940 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 41, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 34, in main
    pages = extract_text(file_path)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 16, in extract_text
    pages = PyMuPDFLoader(pdf_path).load()
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 365, in __init__
    super().__init__(file_path, headers=headers)
  File "/usr/local/lib/python3.12/site-packages/langchain_community/document_loaders/pdf.py", line 116, in __init__
    raise ValueError("File path %s is not a valid file or url" % self.file_path)
ValueError: File path None is not a valid file or url
2024-08-04 02:37:10.960 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 41, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 36, in main
    summary = query_llm(llm, pages, 50)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/appai/common/summary.py", line 20, in query_llm
    chain = load_summarize_chain(llm, chain_type="map_reduce")
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain/chains/summarize/chain.py", line 167, in load_summarize_chain
    return loader_mapping[chain_type](llm, verbose=verbose, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain/chains/summarize/chain.py", line 60, in _load_map_reduce_chain
    map_chain = LLMChain(
                ^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/langchain_core/_api/deprecation.py", line 203, in warn_if_direct_instance
    return wrapped(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pydantic/v1/main.py", line 341, in __init__
    raise validation_error
pydantic.v1.error_wrappers.ValidationError: 2 validation errors for LLMChain
llm
  instance of Runnable expected (type=type_error.arbitrary_type; expected_arbitrary_type=Runnable)
llm
  instance of Runnable expected (type=type_error.arbitrary_type; expected_arbitrary_type=Runnable)
2024-08-04 02:38:36.034 Uncaught app exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 75, in exec_func_with_error_handling
    result = func()
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 574, in code_to_exec
    exec(code, module.__dict__)
  File "/app/appai/pages/04_SummarizePage.py", line 42, in <module>
    main()
  File "/app/appai/pages/04_SummarizePage.py", line 30, in main
    llm = ChatOpenAI(temperature=0, model_name="gpt-3.5-turbo-1106")
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pydantic/v1/main.py", line 341, in __init__
    raise validation_error
pydantic.v1.error_wrappers.ValidationError: 1 validation error for ChatOpenAI
__root__
  Did not find openai_api_key, please add an environment variable `OPENAI_API_KEY` which contains it, or pass `openai_api_key` as a named parameter. (type=value_error)
